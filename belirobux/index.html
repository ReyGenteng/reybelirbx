<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Beli Robux - belirobux.xyz</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { background-color: #121515; color: white; font-family: 'Segoe UI', Arial, sans-serif; }
.method-item { cursor:pointer; display:flex; align-items:center; gap:10px; padding:8px; border-radius:10px; }
.method-item:hover { background-color: #2f3638; }
#method-list { display:none; }
.result-box button {
  background:#7f6a3a; color:white; font-weight:bold;
  border-radius:12px; padding:10px; margin-top:6px; width:100%;
}
.result-box button:hover { background:#a3864f; }
</style>
</head>
<body>

<header class="bg-[#212b2c] flex items-center gap-3 px-4 py-3">
  <button id="menuBtn" class="text-white text-2xl"><i class="fas fa-bars"></i></button>
  <span class="text-[#f9a825] font-extrabold text-lg select-none">BELIROBUX.XYZ</span>
</header>

<main class="px-5 py-4 space-y-5">

  <div>
    <label class="block mb-1 text-white" for="username">Username:</label>
    <input id="username" class="w-full bg-[#2f3638] rounded-full py-3 px-5 placeholder-[#555e5e]" placeholder="Contoh: Rey123" type="text"/>
    <div id="preview" class="mt-2"></div>
  </div>

  <div>
    <label class="block mb-1 text-white" for="jumlah">Jumlah:</label>
    <input id="jumlah" class="w-full bg-[#2f3638] rounded-full py-3 px-5 placeholder-[#555e5e]" placeholder="R$" type="number"/>
  </div>

  <div>
    <label class="block mb-1 text-white" for="price">Price:</label>
    <input id="price" disabled class="w-full bg-[#2f3638] rounded-full py-3 px-5 placeholder-[#555e5e]" placeholder="Rp" type="text"/>
  </div>

  <div>
    <div class="text-[#f9a825] mb-2">Pilih Metode Pembayaran</div>
    <div id="method-select" class="bg-[#2f3638] rounded-lg p-3 cursor-pointer">Pilih Metode</div>
    <div id="method-list" class="mt-2 bg-[#2f3638] rounded-lg">
      <div class="method-item" data-method="Dana">
        <img src="https://reygenteng.github.io/reybelirbx/belirobux/dana.png" width="32" height="32"><span>Dana</span>
      </div>
      <div class="method-item" data-method="QRIS">
        <img src="https://reygenteng.github.io/reybelirbx/belirobux/qris.png" width="32" height="32"><span>QRIS</span>
      </div>
      <div class="method-item" data-method="OVO">
        <img src="https://reygenteng.github.io/reybelirbx/belirobux/ovo.png" width="32" height="32"><span>OVO</span>
      </div>
    </div>
  </div>

  <div class="text-[#f9a825] text-lg pt-4 border-b border-[#2f3638] pb-3">Payment Summary</div>
  <form class="mb-4">
    <label class="block mb-1 text-white" for="coupon">Discount Coupon:</label>
    <div class="flex">
      <input id="coupon" class="flex-grow bg-[#2f3638] rounded-l-full py-3 px-5 placeholder-[#555e5e]" placeholder="Enter Code Here" type="text"/>
      <button type="submit" class="bg-[#7f6a3a] rounded-r-full px-5 font-extrabold text-white">Submit</button>
    </div>
  </form>

  <div class="space-y-3 border-b border-[#2f3638] pb-4" id="summary">
    <div class="flex justify-between"><span>Discount</span><span>Rp 0</span></div>
    <div class="flex justify-between"><span>Biaya Admin</span><span>Rp 0</span></div>
    <div class="flex justify-between text-[#f9a825] text-lg font-extrabold"><span>Total</span><span>Rp 0</span></div>
  </div>

  <div class="flex gap-4 pb-6">
    <button id="cartBtn" class="flex-grow border border-[#f9a825] text-[#f9a825] font-extrabold rounded-full py-3">Customer Service</button>
    <button id="buyNow" class="flex-grow bg-[#7f6a3a] text-white font-extrabold rounded-full py-3">Beli Sekarang</button>
  </div>

  <!-- HASIL TAMPIL DI SINI -->
  <div id="hasil" class="result-box"></div>

</main>

<script>
// Variabel global
let selectedMethod = null;

// Toggle daftar metode
document.getElementById('method-select').addEventListener('click', () => {
  const list = document.getElementById('method-list');
  list.style.display = list.style.display === 'none' || list.style.display === '' ? 'block' : 'none';
});

// Klik metode
document.querySelectorAll('.method-item').forEach(item => {
  item.addEventListener('click', () => {
    selectedMethod = item.dataset.method;
    document.getElementById('method-select').innerHTML = `<div class="flex items-center gap-2">
      <img src="${item.querySelector('img').src}" width="28" height="28"><span>${selectedMethod}</span>
    </div>`;
    document.getElementById('method-list').style.display = 'none';
  });
});

// Preview username realtime
document.getElementById('username').addEventListener('input', async () => {
  const username = document.getElementById('username').value.trim();
  const previewDiv = document.getElementById('preview');
  if (!username) { previewDiv.innerHTML = ""; return; }

  try {
    let res = await fetch("https://users.roproxy.com/v1/usernames/users", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({usernames:[username]})
    });
    let data = await res.json();
    if (!data.data || data.data.length === 0) {
      previewDiv.innerHTML = `<p style="color:red">Username tidak ditemukan!</p>`;
      return;
    }
    const id = data.data[0].id;
    const thumb = await fetch(`https://thumbnails.roproxy.com/v1/users/avatar-headshot?userIds=${id}&size=150x150&format=Png`);
    const td = await thumb.json();
    const img = td.data[0].imageUrl;
    previewDiv.innerHTML = `<div class="flex items-center gap-2"><img src="${img}" width="40" style="border-radius:50%"><span>${data.data[0].name}</span></div>`;
  } catch(e) { previewDiv.innerHTML = `<p style="color:red">Gagal cek username!</p>`; }
});

// Update harga realtime
document.getElementById('jumlah').addEventListener('input', () => {
  const jumlah = parseInt(document.getElementById('jumlah').value);
  if (isNaN(jumlah)) { document.getElementById('price').value=""; return; }
  const harga = jumlah * 140 + 3000;
  document.getElementById('price').value = "Rp " + harga.toLocaleString('id-ID');
});

// Klik Customer Service
document.getElementById('cartBtn').addEventListener('click', () => {
  window.location.href = "https://help.reyambon.xyz";
});

// Klik Beli Sekarang
document.getElementById('buyNow').addEventListener('click', () => {
  const username = document.getElementById('username').value.trim();
  const jumlah = parseInt(document.getElementById('jumlah').value);
  if (!username || !jumlah || !selectedMethod) { alert("Lengkapi semua data!"); return; }

  const robuxGamepass = Math.ceil(jumlah / 0.7);
  const hasil = document.getElementById('hasil');
  hasil.style.display = 'block';
  hasil.innerHTML = `
    <p class="mb-3">Buat Gamepass senilai <b>${robuxGamepass}</b> Robux</p>
    <button onclick="lanjut('${username}',${jumlah},'${selectedMethod}')">Sudah buat Gamepass</button>
    <button onclick="window.open('https://www.roblox.com/develop','_blank')">Buat Gamepass</button>
    <button onclick="document.getElementById('hasil').style.display='none'">Kembali</button>
  `;
});

function lanjut(username, jumlah, metode) {
  const wa = `https://wa.me/6287887028120?text=Halo%20Kak,%20username%20${username}%20topup%20${jumlah}%20Robux%20dengan%20${metode}`;
  window.location.href = wa;
}
</script>
</body>
</html>
