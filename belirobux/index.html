<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>belirobux.xyz</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap');
  body { font-family: 'Rubik', sans-serif; }
  .dropdown { position: relative; user-select: none; }
  .dropdown-btn {
    background-color: #2f3638;
    padding: 12px 16px;
    border-radius: 9999px;
    cursor: pointer;
    display: flex; align-items: center; justify-content: space-between;
  }
  .dropdown-content {
    display: none;
    position: absolute;
    top: 110%;
    left: 0;
    right: 0;
    background-color: #2f3638;
    border-radius: 16px;
    z-index: 10;
    overflow: hidden;
  }
  .dropdown-item {
    display: flex; align-items: center; gap: 10px;
    padding: 12px 16px;
    cursor: pointer;
  }
  .dropdown-item:hover { background-color: #3f4749; }
</style>
</head>
<body class="bg-[#121515] text-white">

<header class="bg-[#212b2c] flex items-center gap-3 px-4 py-3">
  <button aria-label="Menu" id="menuBtn" class="text-white text-2xl">
    <i class="fas fa-bars"></i>
  </button>
  <span class="text-[#f9a825] font-extrabold text-lg select-none">
    belirobux.xyz
  </span>
</header>

<main class="px-5 py-4 space-y-5">
  <div>
    <label class="block mb-1" for="username">Username:</label>
    <input id="username" class="w-full bg-[#2f3638] rounded-full py-3 px-5 placeholder-[#555e5e] focus:outline-none" 
           placeholder="Contoh: Rey123" type="text" oninput="cekUsername()"/>
    <div id="preview" class="mt-3"></div>
  </div>

  <div>
    <label class="block mb-1" for="jumlah">Jumlah:</label>
    <input id="jumlah" class="w-full bg-[#2f3638] rounded-full py-3 px-5 placeholder-[#555e5e] focus:outline-none"
           placeholder="R$" type="number" oninput="updateHarga()"/>
  </div>

  <div>
    <label class="block mb-1" for="price">Price:</label>
    <input id="price" class="w-full bg-[#2f3638] rounded-full py-3 px-5 focus:outline-none" readonly/>
  </div>

  <div class="text-[#f9a825] font-normal text-lg">Metode Pembayaran</div>

  <!-- Custom Dropdown -->
  <div class="dropdown" id="dropdown">
    <div class="dropdown-btn" onclick="toggleDropdown()">
      <span id="selected-method" class="text-gray-400">Pilih Metode</span>
      <i class="fas fa-chevron-down text-gray-400"></i>
    </div>
    <div class="dropdown-content">
      <div class="dropdown-item" data-value="qris" data-img="https://reygenteng.github.io/reybelirbx/belirobux/qris.png">
        <img src="https://reygenteng.github.io/reybelirbx/belirobux/qris.png" class="w-8 h-8"><span>QRIS</span>
      </div>
      <div class="dropdown-item" data-value="dana" data-img="https://reygenteng.github.io/reybelirbx/belirobux/dana.png">
        <img src="https://reygenteng.github.io/reybelirbx/belirobux/dana.png" class="w-8 h-8"><span>Dana</span>
      </div>
      <div class="dropdown-item" data-value="ovo" data-img="https://reygenteng.github.io/reybelirbx/belirobux/ovo.png">
        <img src="https://reygenteng.github.io/reybelirbx/belirobux/ovo.png" class="w-8 h-8"><span>OVO</span>
      </div>
    </div>
  </div>

  <input type="hidden" id="metode" value="">

  <div class="text-[#f9a825] font-normal text-lg pt-4 border-b border-[#2f3638] pb-3">
    Payment Summary
  </div>

  <div class="space-y-3 border-b border-[#2f3638] pb-4" id="summary">
    <div class="flex justify-between">
      <span>Discount</span><span id="disc">Rp 0</span>
    </div>
    <div class="flex justify-between">
      <span>Biaya Admin</span><span id="admin">Rp 0</span>
    </div>
    <div class="flex justify-between text-[#f9a825] text-lg font-extrabold">
      <span>Total</span><span id="total">Rp 0</span>
    </div>
  </div>

  <div class="flex gap-4 pb-6">
    <button class="flex-grow border border-[#f9a825] text-[#f9a825] rounded-full py-3 hover:bg-[#f9a825] hover:text-[#121515]" 
            type="button" onclick="window.location.href='https://help.reyambon.xyz'">
      Customer Service
    </button>
    <button class="flex-grow bg-[#7f6a3a] rounded-full py-3 hover:bg-[#a3864f]" 
            type="button" onclick="beliSekarang()">
      Beli Sekarang
    </button>
  </div>

  <div id="hasil" style="display:none;"></div>
</main>

<script>
let locked = false;

function toggleDropdown() {
  document.querySelector(".dropdown-content").classList.toggle("hidden");
  const content = document.querySelector(".dropdown-content");
  content.style.display = content.style.display === "block" ? "none" : "block";
}

document.querySelectorAll(".dropdown-item").forEach(item=>{
  item.addEventListener("click", ()=>{
    const val = item.getAttribute("data-value");
    const img = item.getAttribute("data-img");
    const text = item.innerText;
    document.getElementById("selected-method").innerHTML = `<div class='flex items-center gap-2'><img src="${img}" class="w-6 h-6">${text}</div>`;
    document.getElementById("metode").value = val;
    document.querySelector(".dropdown-content").style.display = "none";
  });
});

async function cekUsername() {
  if (locked) return;
  const username = document.getElementById('username').value.trim();
  const previewDiv = document.getElementById('preview');
  previewDiv.innerHTML = "";
  if (!username) return;
  try {
    const res = await fetch("https://users.roproxy.com/v1/usernames/users", {
      method: "POST", headers: {"Content-Type": "application/json"},
      body: JSON.stringify({ usernames: [username] })
    });
    const data = await res.json();
    if (!data.data || !data.data[0]) return;
    const id = data.data[0].id;
    const thumbRes = await fetch(`https://thumbnails.roproxy.com/v1/users/avatar-headshot?userIds=${id}&size=150x150&format=Png`);
    const thumbData = await thumbRes.json();
    const img = thumbData.data[0].imageUrl;
    previewDiv.innerHTML = `<div class="flex items-center gap-3 border border-[#f9a825] rounded-full px-4 py-2 cursor-pointer" onclick="toggleLock()">
        <img src="${img}" class="w-10 h-10 rounded-full"><span class="font-bold">${data.data[0].name}</span></div>`;
  } catch {}
}

function toggleLock() {
  locked = !locked;
  const box = document.getElementById('preview').firstElementChild;
  if (locked) box.classList.add("ring-2","ring-yellow-500");
  else box.classList.remove("ring-2","ring-yellow-500");
}

function updateHarga() {
  const jumlah = parseInt(document.getElementById('jumlah').value);
  const priceField = document.getElementById('price');
  const adminField = document.getElementById('admin');
  const totalField = document.getElementById('total');
  if (isNaN(jumlah)||jumlah<1){priceField.value="";adminField.innerText="Rp 0";totalField.innerText="Rp 0";return;}
  let harga = jumlah * 140;
  let admin = 3000 + Math.floor(Math.random()*100);
  let total = harga+admin;
  priceField.value = "Rp " + harga.toLocaleString('id-ID');
  adminField.innerText = "Rp " + admin.toLocaleString('id-ID');
  totalField.innerText = "Rp " + total.toLocaleString('id-ID');
}

function beliSekarang(){
  const username=document.getElementById('username').value.trim();
  const jumlah=parseInt(document.getElementById('jumlah').value);
  const metode=document.getElementById('metode').value;
  if(!username||isNaN(jumlah)||jumlah<1||!metode){alert("Lengkapi data!");return;}
  const hasilDiv=document.getElementById('hasil');
  const totalGamepass=Math.ceil(jumlah/0.7);
  hasilDiv.style.display="block";
  hasilDiv.innerHTML=`
    <p class="text-lg font-bold">Buat Gamepass senilai ${totalGamepass} Robux</p>
    <div class="flex gap-2">
      <button class="flex-grow bg-[#7f6a3a] rounded-full py-3" onclick="lanjut('${username}',${jumlah},'${metode}')">Sudah buat Gamepass</button>
      <button class="flex-grow bg-[#7f6a3a] rounded-full py-3" onclick="window.open('https://www.roblox.com/develop','_blank')">Buat Gamepass</button>
      <button class="flex-grow bg-[#7f6a3a] rounded-full py-3" onclick="document.getElementById('hasil').style.display='none'">Kembali</button>
    </div>`;
}

function lanjut(username,jumlah,metode){
  const wa=`https://wa.me/6287887028120?text=Halo%20Kak,%20Username%20${username}%20Topup%20${jumlah}%20Robux%20via%20${metode}`;
  window.location.href=wa;
}
</script>
</body>
  </html>
